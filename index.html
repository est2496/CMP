<!-- 
  Original Idea: Bernard
  Edited by: Estella
  Modified Date: 2025-05-21
  Description: This is the main HTML page version 1 for the website of CMP service catalog
  Filename: main9_210525_Estella_v1
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>Online Order System</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --danger: #e74c3c;
            --success: #27ae60;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --gray: #95a5a6;
        }
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f9f9f9;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
        }
        .nav-tabs {
            display: flex;
            background: var(--light);
            border-bottom: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }
        .tab-btn {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1rem;
            color: var(--dark);
            position: relative;
        }
        .tab-btn.active {
            background: white;
            color: var(--secondary);
            font-weight: bold;
        }
        .tab-btn.active:after {
            content: '';
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--secondary);
        }
        .tab-content {
            display: none;
            background: white;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            border-radius: 8px;
        }
        .tab-content.active {
            display: block;
        }
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
        }
        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }
        .btn-primary:hover {
            background-color: #2980b9;
        }
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        .btn-success:hover {
            background-color: #219653;
        }
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        .btn-danger:hover {
            background-color: #c0392b;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        input, select {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        /* NEW LAYOUT STYLES */
        .page-container {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }
        .main-content-container {
            flex: 3;
            display: flex;
            flex-direction: column;
            gap: 1rem; /* Reduced from 2rem for tighter spacing */
        }
        .cart-sidebar {
            flex: 1;
            position: sticky;
            top: 120px;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
            max-height: 90vh;
            overflow-y: auto;
        }

        /* Adjusted heading styles for tighter spacing */
        #order-tab h1 {
            margin-bottom: 0.25rem; /* Reduced from default */
        }
        .cart-sidebar h2 {
            margin-top: 0;
        }

        /* Environment selector - tighter spacing */
        .environment-selector {
            margin: 0.25rem 0 0.75rem; /* Tighter vertical margins */
            padding: 0.75rem; /* Slightly reduced padding */
            background-color: var(--light);
            border-radius: 4px;
            width: 755px;
        }

        /* Cart item styles */
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }
        .cart-item-details {
            flex: 1;
        }
        .cart-item-actions {
            margin-left: 1rem;
        }
        .delete-item {
            background: none;
            border: none;
            color: var(--danger);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 0.2rem 0.5rem;
        }
        .delete-item:hover {
            color: #c0392b;
        }
        .cart-summary {
            margin-top: 1.5rem;
            border-top: 1px solid #eee;
            padding-top: 1rem;
        }
        .cart-summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        .cart-total {
            font-weight: bold;
            font-size: 1.2rem;
            margin: 1rem 0;
            text-align: right;
        }
        .empty-cart {
            color: var(--gray);
            text-align: center;
            margin-top: 2rem;
        }
        .cart-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }

        /* Pricing table styles */
        .pricing-section {
            margin-bottom: 2rem;
        }
        .pricing-section h2 {
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
        }
        .pricing-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        .pricing-table th, .pricing-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .pricing-table th {
            background-color: var(--light);
            font-weight: 600;
        }
        .pricing-table tr:hover {
            background-color: #f9f9f9;
        }
        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }
        .quantity-control {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        .quantity-control input {
            width: 60px;
            text-align: center;
            padding: 0.5rem;
        }

        /* Modal styles */
        #desc-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            display: none;
            padding: 20px;
            color: white;
            overflow: auto;
        }
        #desc-modal > div {
            background: #333;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            border-radius: 5px;
            max-height: 80vh;
            overflow-y: auto;
        }
        #modal-desc {
            white-space: pre-wrap;
            font-family: inherit;
            line-height: 1.5;
            margin: 15px 0;
        }
        .desc-link {
            cursor: pointer;
            color: #3498db;
            text-decoration: underline;
        }
        .desc-link:hover {
            color: #2980b9;
        }

        /* Admin styles */
        #admin-actions {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            align-items: center;
        }
        #product-form {
            display: none;
            margin-bottom: 2rem;
        }
        .two-columns {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }
        .two-columns > .form-group {
            flex: 1;
        }
        .specs-section {
            margin-top: 1rem;
            padding: 1rem;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        .specs-section h3 {
            margin-bottom: 0.5rem;
        }
        .mysql-specs {
            display: none;
        }
        .products-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }
        .products-table th, .products-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        .products-table th {
            background-color: var(--light);
        }
        .action-btn {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .checkout-container {
            display: flex;
            gap: 2rem;
            align-items: flex-start;
        }
        
        .checkout-main-content {
            flex: 3;
        }
        
        .checkout-cart-sidebar {
            flex: 1;
            position: sticky;
            top: 20px;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            height: fit-content;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .page-container {
                flex-direction: column;
            }
            .cart-sidebar {
                position: static;
                width: 100%;
                margin-top: 2rem;
            }
            .environment-selector {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">Online Order System</div>
        <div id="admin-link" style="display: none;">
            <button class="btn btn-primary" onclick="showTab('admin-tab')">Admin Panel</button>
        </div>
    </header>

    <div class="nav-tabs">
        <button class="tab-btn active" onclick="showTab('order-tab')">Order Products</button>
        <button class="tab-btn" onclick="showTab('checkout-tab')">Checkout</button>
        <button class="tab-btn" id="admin-tab-btn" onclick="showTab('admin-tab')" style="display: none;">Admin Panel</button>
    </div>

    <div class="container">
        <!-- ORDER TAB -->
        <div id="order-tab" class="tab-content active">
            <div class="page-container">
                <div class="main-content-container">
                    <h1>Product Catalog</h1>
                    
                    <!-- Server Environment Selector - now with tighter spacing -->
                    <div class="environment-selector">
                        <label for="server-environment">Server Environment:</label>
                        <select id="server-environment" style="width: 100%;">
                            <option value="az1">Availability Zone1 (AZ1)</option>
                            <option value="az2">Availability Zone2 (AZ2)</option>
                        </select>
                    </div>

                    <!-- ELASTIC CLOUD SERVERS TABLE -->
                    <div class="pricing-section">
                        <h2>Elastic Cloud Servers</h2>
                        <table class="pricing-table" id="ecs-table">
                            <thead>
                                <tr>
                                    <th>vCPUs</th>
                                    <th>Memory</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- ECS rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- EVS ULTRA DISK SPACE TABLE -->
                    <div class="pricing-section">
                        <h2>EVS Ultra Disk Space</h2>
                        <table class="pricing-table" id="evs-table">
                            <thead>
                                <tr>
                                    <th>Capacity</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- EVS rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- STORAGE TABLE -->
                    <div class="pricing-section">
                        <h2>Storage</h2>
                        <table class="pricing-table" id="storage-table">
                            <thead>
                                <tr>
                                    <th>Type</th>
                                    <th>Capacity</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Storage rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>

                    <!-- MANAGED SERVICES TABLE -->
                    <div class="pricing-section">
                        <h2>Managed Services</h2>
                        <table class="pricing-table" id="managed-table">
                            <thead>
                                <tr>
                                    <th>Service Level</th>
                                    <th>Description</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Managed services rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                        <div id="desc-modal" style="display:none;">
                            <div>
                                <h2 id="modal-title"></h2>
                                <pre id="modal-desc" style="white-space:pre-wrap;font-family:inherit;"></pre>
                                <button style="margin-top:20px;padding:10px 20px;background:#3498db;color:white;border:none;border-radius:4px;">
                                    Close
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- MYSQL RDS DATABASE SERVICE TABLE -->
                    <div class="pricing-section">
                        <h2>MySQL RDS Database Service</h2>
                        <table class="pricing-table" id="mysql-table">
                            <thead>
                                <tr>
                                    <th>Edition</th>
                                    <th>vCPUs</th>
                                    <th>RAM</th>
                                    <th>Storage</th>
                                    <th>Price</th>
                                    <th>Quantity</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- MySQL rows will be populated by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- CART SIDEBAR -->
                <aside class="cart-sidebar">
                    <h2>Shopping Cart</h2>
                    <div id="cart-items">
                        <div class="empty-cart">Your cart is empty</div>
                    </div>
                    <div id="cart-summary" class="cart-summary" style="display: none;">
                        <div class="cart-summary-row">
                            <span>Subtotal:</span>
                            <span id="cart-subtotal">RM0.00</span>
                        </div>
                        <div class="cart-summary-row">
                            <span>Tax (8%):</span>
                            <span id="cart-tax">0.00</span>
                        </div>
                        <div class="cart-total">
                            <span>Total:</span>
                            <span id="cart-total">RM0.00</span>
                        </div>
                    </div>
                    <div class="cart-actions" id="cart-actions" style="display: none;">
                        <button class="btn btn-danger" id="clear-cart" style="flex: 1;">Clear Cart</button>
                        <button class="btn btn-success" id="checkout-btn" style="flex: 2;" onclick="showTab('checkout-tab')">
                            Proceed to Checkout
                        </button>
                    </div>
                </aside>
            </div>
        </div>

        <!-- CHECKOUT TAB -->
        <div id="checkout-tab" class="tab-content">
            <h1>Checkout</h1>
            
            <div class="checkout-container">
                <div class="checkout-main-content">
                    <h2>Shipping Information</h2>
                    <form id="shipping-form">
                        <div class="form-group">
                            <label for="full-name">Full Name</label>
                            <input type="text" id="full-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="address">Shipping Address</label>
                            <input type="text" id="address" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="city">City</label>
                            <input type="text" id="city" required>
                        </div>
                        
                        <div class="two-columns">
                            <div class="form-group">
                                <label for="state">State</label>
                                <select id="state" required>
                                    <option value="">Select State</option>
                                    <!-- Options will be populated by JavaScript -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="zip">ZIP/Postal Code</label>
                                <input type="text" id="zip" required>
                            </div>
                        </div> 
                        
                        <h2>Payment Method</h2>
                        
                        <div class="form-group">
                            <label for="card-name">Name on Card</label>
                            <input type="text" id="card-name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="card-number">Card Number</label>
                            <input type="text" id="card-number" required>
                        </div>
                        
                        <div class="two-columns">
                            <div class="form-group">
                                <label for="expiry">Expiry Date</label>
                                <input type="text" id="expiry" placeholder="MM/YY" required>
                            </div>
                            <div class="form-group">
                                <label for="cvv">CVV</label>
                                <input type="text" id="cvv" required>
                            </div>
                        </div>
                        
                        <button type="button" class="btn btn-success" id="place-order" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                            Place Order
                        </button>
                    </form>
                </div>
                
                <aside class="checkout-cart-sidebar">
                    <h2>Order Summary</h2>
                    <div id="order-items">
                        <!-- Order items will be loaded here -->
                    </div>
                    <div class="cart-summary">
                        <div class="cart-summary-row">
                            <span>Subtotal:</span>
                            <span id="order-subtotal">RM0.00</span>
                        </div>
                        <div class="cart-summary-row">
                            <span>Tax (8%):</span>
                            <span id="order-tax">RM0.00</span>
                        </div>
                        <div class="order-total">
                            <span>Total:</span>
                            <span id="order-total">RM0.00</span>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="showTab('order-tab')" style="width: 100%; margin-top: 1rem;">
                        ← Back to Shopping
                    </button>
                </aside>
            </div>
        </div>

        <!-- ADMIN TAB -->
        <div id="admin-tab" class="tab-content">
            <div id="admin-actions">
                <h1>Product Catalog Management</h1>
                <button class="btn btn-primary" id="add-product-btn">Add New Product</button>
            </div>
            
            <div id="product-form">
                <h2 id="form-title">Add Product</h2>
                <form>
                    <input type="hidden" id="product-id">
                    <div class="form-group">
                        <label for="admin-product-name">Product Name</label>
                        <input type="text" id="admin-product-name" required>
                    </div>
                    <div class="form-group">
                        <label for="admin-product-category">Category</label>
                        <select id="admin-product-category" required onchange="updateSpecsForm()">
                            <option value="">Select Category</option>
                            <option value="ecs">Elastic Cloud Servers</option>
                            <option value="evs">EVS Ultra Disk Space</option>
                            <option value="storage">Storage</option>
                            <option value="managed">Managed Services</option>
                            <option value="mysql">MySQL RDS</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="admin-product-price">Price (RM)</label>
                        <input type="number" id="admin-product-price" step="0.01" min="0" required>
                    </div>
                    <div class="form-group">
                        <label for="admin-product-description">Description</label>
                        <input type="text" id="admin-product-description">
                    </div>
                    
                    <!-- Product Specifications Section -->
                    <div class="specs-section" id="specs-section" style="display: none;">
                        <h3>Product Specifications</h3>
                        <div id="ecs-specs" style="display: none;">
                            <div class="two-columns">
                                <div class="form-group">
                                    <label for="ecs-vcpus">vCPUs</label>
                                    <input type="number" id="ecs-vcpus" min="1" value="1">
                                </div>
                                <div class="form-group">
                                    <label for="ecs-memory">Memory (GB)</label>
                                    <input type="number" id="ecs-memory" step="0.1" min="0.5" value="0.5">
                                </div>
                            </div>
                        </div>
                        
                        <div id="evs-specs" style="display: none;">
                            <div class="form-group">
                                <label for="evs-capacity">Capacity (GB)</label>
                                <input type="number" id="evs-capacity" min="1" value="50">
                            </div>
                        </div>
                        
                        <div id="storage-specs" style="display: none;">
                            <div class="form-group">
                                <label for="storage-type">Storage Type</label>
                                <select id="storage-type">
                                    <option value="block">Block Storage</option>
                                    <option value="object">Object Storage</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="storage-capacity">Capacity (GB)</label>
                                <input type="number" id="storage-capacity" min="1" value="100">
                            </div>
                        </div>
                        
                        <div id="managed-specs" style="display: none;">
                            <div class="form-group">
                                <label for="managed-level">Service Level</label>
                                <select id="managed-level">
                                    <option value="Basic Managed Service">Basic Managed Service</option>
                                    <option value="Premium Managed Service">Premium Managed Service</option>
                                </select>
                            </div>
                        </div>

                        <div id="mysql-specs" class="specs-section mysql-specs" style="display: none;">
                            <div class="two-columns">
                                <div class="form-group">
                                    <label for="mysql-vcpus">vCPUs</label>
                                    <input type="number" id="mysql-vcpus" min="1" value="2">
                                </div>
                                <div class="form-group">
                                    <label for="mysql-ram">RAM (GB)</label>
                                    <input type="number" id="mysql-ram" min="1" value="3">
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="mysql-storage">Storage (GB)</label>
                                <input type="number" id="mysql-storage" min="1" value="500">
                            </div>
                            <div class="form-group">
                                <label for="mysql-edition">Edition</label>
                                <input type="text" id="mysql-edition" value="HA Edition">
                            </div>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 1rem;">
                        <button type="button" class="btn btn-primary" id="save-product">Save</button>
                        <button type="button" class="btn btn-danger" id="cancel-edit">Cancel</button>
                    </div>
                </form>
            </div>
            
            <table class="products-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Category</th>
                        <th>Price</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="products-list">
                    <!-- Products will be loaded here -->
                </tbody>
            </table>
            
            <button class="btn btn-primary" onclick="showTab('order-tab')" style="margin-top: 2rem;">
                ← Back to Store
            </button>
        </div>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let products = [
            // Elastic Cloud Servers
            { 
                id: 'ecs-1', 
                name: "IaaS ECS 2C4M", 
                category: "ecs", 
                price: 19.99, 
                description: "Basic cloud server with 2 vCPUs and 4GB RAM",
                specs: {
                    vcpus: 2,
                    memory: 4
                }
            },
            { 
                id: 'ecs-2', 
                name: "IaaS ECS 2C8M", 
                category: "ecs", 
                price: 29.99, 
                description: "Cloud server with 2 vCPUs and 8GB RAM",
                specs: {
                    vcpus: 2,
                    memory: 8
                }
            },
            { 
                id: 'ecs-3', 
                name: "IaaS ECS 4C8M", 
                category: "ecs", 
                price: 39.99, 
                description: "Cloud server with 4 vCPUs and 8GB RAM",
                specs: {
                    vcpus: 4,
                    memory: 8
                }
            },
            { 
                id: 'ecs-4', 
                name: "IaaS ECS 4C16M", 
                category: "ecs", 
                price: 59.99, 
                description: "Cloud server with 4 vCPUs and 16GB RAM",
                specs: {
                    vcpus: 4,
                    memory: 16
                }
            },
            { 
                id: 'ecs-5', 
                name: "IaaS ECS 8C16M", 
                category: "ecs", 
                price: 79.99, 
                description: "High performance cloud server with 8 vCPUs and 16GB RAM",
                specs: {
                    vcpus: 8,
                    memory: 16
                }
            },
            { 
                id: 'ecs-6', 
                name: "IaaS ECS 8C32M", 
                category: "ecs", 
                price: 119.99, 
                description: "High performance cloud server with 8 vCPUs and 32GB RAM",
                specs: {
                    vcpus: 8,
                    memory: 32
                }
            },
            { 
                id: 'ecs-7', 
                name: "IaaS ECS 16C32M", 
                category: "ecs", 
                price: 159.99, 
                description: "Enterprise cloud server with 16 vCPUs and 32GB RAM",
                specs: {
                    vcpus: 16,
                    memory: 32
                }
            },
            { 
                id: 'ecs-8', 
                name: "IaaS ECS 16C64M", 
                category: "ecs", 
                price: 229.99, 
                description: "Enterprise cloud server with 16 vCPUs and 64GB RAM",
                specs: {
                    vcpus: 16,
                    memory: 64
                }
            },
            
            // EVS Ultra Disk Space
            { 
                id: 'evs-1', 
                name: "EVS Ultra Disk 50GB", 
                category: "evs", 
                price: 5.00, 
                description: "50GB Ultra Disk Storage",
                specs: {
                    capacity: 50
                }
            },
            { 
                id: 'evs-2', 
                name: "EVS Ultra Disk 100GB", 
                category: "evs", 
                price: 8.00, 
                description: "100GB Ultra Disk Storage",
                specs: {
                    capacity: 100
                }
            },
            { 
                id: 'evs-3', 
                name: "EVS Ultra Disk 500GB", 
                category: "evs", 
                price: 30.00, 
                description: "500GB Ultra Disk Storage",
                specs: {
                    capacity: 500
                }
            },
            { 
                id: 'evs-4', 
                name: "EVS Ultra Disk 1000GB", 
                category: "evs", 
                price: 50.00, 
                description: "1000GB (1TB) Ultra Disk Storage",
                specs: {
                    capacity: 1000
                }
            },
            
            // Storage
            { 
                id: 'storage-1', 
                name: "Block Storage (Standard) 100GB", 
                category: "storage", 
                price: 2.79, 
                description: "100GB Block Storage (Standard Disk)",
                specs: {
                    type: "block",
                    capacity: 100
                }
            },
            { 
                id: 'storage-2', 
                name: "Object Storage 100GB", 
                category: "storage", 
                price: 0.80, 
                description: "100GB Object Storage",
                specs: {
                    type: "object",
                    capacity: 100
                }
            },
            
            // Managed Services
            {
              id: 'managed-1',
              name: "Basic Managed Service",
              category: "managed",
              price: 13.28,
              shortDesc: "Basic support for 1 server (remote/physical)", 
              fullDesc: `Basic Managed Service for 1 unit of virtual/physical server with remote arm assistance.

              Physical server ONLY:
              1. Rebooting or power cycling of physical server.
              2. With granted access, to provide visual verification (screen capture) to assist customer's 
              remote troubleshooting efforts.
              3. Swapping of pre-labeled, pre-ejected, removable media (tapes, CDs, DVDs, etc.).
              4. Replacing or verifying network connectivity.
              5. Data Centre physical access upon write in and approved by SAINS.
              6. Server availability check, to monitor the keep-alive network connectivity.
              7. Basic server monitoring: server availabilty.
              8. Physical check and relaying status of equipment indicators. (LED indicators).
              9. Exclude parts replacement.
              10. Call Centre escalation.

              Virtual server/Cloud ONLY:
              1. With granted access, to provide visual verification (screen capture) 
              to assist customer's remote troubleshooting efforts.
              2. Basic server monitoring: server availabilty.
              3. Call Centre escalation.`
            },
            {
              id: 'managed-2',
              name: "Premium Managed Service", 
              category: "managed", 
              price: 56.25,
              shortDesc: "Advanced support for 1 server (OS/HW)", 
              fullDesc: `Premium Managed Service for 1 unit of virtual/physical server server support and maintenance inclusive of:

              1. Work together with customer to resolve their server related problem.
              2. To support server operating system and hardware related problem.
              3. With granted access to support operating system, to fine tune, troubleshooting,
              diagnostic and investigation of server operating system,
              includes re-installation of operating system when required.
              4. Hardware level - to diagnose and identify the HW problems, exclude parts replacement.
              (applicable for physical server only)
              5. Administration tasks includes operating system account maintenance (create/delete/modify).
              File sharing management, moving of file/directory and permission modification.
              Services maintenance, start/stop/restart the services, with written authorized approval 
              from customer and operation manual provided,
              to support the operating system related services.
              6. Patch maintenance includes: Critical or security or firmware patching for Operating System or 
              Server Hardware level only if it is a physical server. Work together with customer whenever 
              required with written authorized approval from customer. 
              Work together with customer to recover if problems encountered after the patch installation.
              7. Advance monitoring includes: monitoring the server resources 
              utilization for storage, processor and memory (HDD/CPU/RAM).
              8. Call Centre escalation.

              NOTE: Exclusion
              1. Application support and the application platform software such as apache, PHP, 
              tomcat, IIS and database services.`
            },

            // MySQL RDS Products
            { 
              id: 'mysql-1', 
              name: "Basic MySQL HA Edition RDS", 
              category: "mysql", 
              price: 12000.00, 
              description: "Basic MySQL HA Edition RDS with 2vCPU, 8GB RAM, 500GB SSD Storage",
              specs: {
              vcpus: 2,
              ram: 8,  
              storage: 500,
              edition: "Basic"
            }
          },
          { 
            id: 'mysql-2', 
            name: "Standard MySQL HA Edition RDS", 
            category: "mysql", 
            price: 18000.00, 
            description: "Standard MySQL HA Edition RDS with 4 vCPU, 16GB RAM, 500GB SSD Storage",
            specs: {
              vcpus: 4,
              ram: 16,
              storage: 500,
              edition: "Standard"
          }
        },
          { 
          id: 'mysql-3', 
          name: "Premium MySQL HA Edition RDS", 
          category: "mysql", 
          price: 28000.00, 
          description: "Premium MySQL HA Edition RDS with 8 vCPU, 32GB RAM, 500GB SSD Storage",
          specs: {
            vcpus: 8,
            ram: 32,
            storage: 500,
            edition: "Premium"
        }
      },
        { 
          id: 'mysql-4', 
          name: "Advance MySQL HA Edition RDS", 
          category: "mysql", 
          price: 58000.00, 
          description: "Advance MySQL HA Edition RDS with 16 vCPU, 64GB RAM, 500GB SSD Storage",
          specs: {
            vcpus: 16,
            ram: 64,
            storage: 500,
            edition: "Advance"
        }
      }
    ];
        
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const TAX_RATE = 0.08;

        // Malaysian states list
        const malaysianStates = [
            "Johor",
            "Kedah",
            "Kelantan",
            "Kuala Lumpur",
            "Labuan",
            "Melaka",
            "Negeri Sembilan",
            "Pahang",
            "Penang",
            "Perak",
            "Perlis",
            "Putrajaya",
            "Sabah",
            "Sarawak",
            "Selangor",
            "Terengganu"
        ];

        // ========== HELPER FUNCTIONS ==========
        function loadProductsFromStorage() {
            const storedProducts = localStorage.getItem('products');
        
            if (storedProducts) {
                try {
                    const parsedProducts = JSON.parse(storedProducts);
                    if (Array.isArray(parsedProducts) && parsedProducts.length > 0) {
                        products = parsedProducts;
                    } else {
                        localStorage.setItem('products', JSON.stringify(products));
                    }
                } catch (e) {
                    localStorage.setItem('products', JSON.stringify(products));
                }
            } else {
                localStorage.setItem('products', JSON.stringify(products));
            }
        
            renderPricingTables();
        }

        function populateStatesDropdown() {
            const stateSelect = document.getElementById('state');
            while (stateSelect.options.length > 1) {
                stateSelect.remove(1);
            }
            malaysianStates.forEach(state => {
                const option = document.createElement('option');
                option.value = state;
                option.textContent = state;
                stateSelect.appendChild(option);
            });
        }      

        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // ========== RENDER PRICING TABLES ==========
        function renderPricingTables() {
            renderECSTable();
            renderEVSTable();
            renderStorageTable();
            renderManagedServicesTable();
            renderMySQLTable();
        }

        function renderECSTable() {
            const ecsProducts = products.filter(p => p.category === 'ecs');
            const tbody = document.querySelector('#ecs-table tbody');
            tbody.innerHTML = '';
    
            ecsProducts.forEach((product) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.specs.vcpus}</td>
                    <td>${product.specs.memory}GB</td>
                    <td>RM${product.price.toFixed(2)}/month</td>
                    <td>
                        <div class="quantity-control">
                            <input type="number" min="1" value="1" id="qty-${product.id}">
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm" 
                        onclick="addProductToCart('${product.id}')">
                        Add to Cart
                    </button>
                </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function renderEVSTable() {
            const evsProducts = products.filter(p => p.category === 'evs');
            const tbody = document.querySelector('#evs-table tbody');
            tbody.innerHTML = '';
    
            evsProducts.forEach((product) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.specs.capacity}GB</td>
                    <td>RM${product.price.toFixed(2)}/month</td>
                    <td>
                        <div class="quantity-control">
                            <input type="number" min="1" value="1" id="qty-${product.id}">
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm" 
                            onclick="addProductToCart('${product.id}')">
                                Add to Cart
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function renderStorageTable() {
            const storageProducts = products.filter(p => p.category === 'storage');
            const tbody = document.querySelector('#storage-table tbody');
            tbody.innerHTML = '';
    
            storageProducts.forEach((product) => {
                const typeName = product.specs.type === 'block' ? 'Block Storage (Standard)' : 'Object Storage';
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${typeName}</td>
                    <td>${product.specs.capacity}GB</td>
                    <td>RM${product.price.toFixed(2)}/month</td>
                    <td>
                        <div class="quantity-control">
                            <input type="number" min="1" value="1" id="qty-${product.id}">
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm" 
                            onclick="addProductToCart('${product.id}')">
                                Add to Cart
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function renderManagedServicesTable() {
            const tbody = document.querySelector('#managed-table tbody');
            tbody.innerHTML = '';
    
            products.filter(p => p.category === 'managed').forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                <td>${product.name}</td>
                    <td>
                        <span class="desc-link" data-title="${escapeHtml(product.name)}" data-desc="${escapeHtml(product.fullDesc)}">
                            ${product.shortDesc}
                        </span>
                    </td>
                <td>RM${product.price.toFixed(2)}/month</td>
                <td><input type="number" min="1" value="1" id="qty-${product.id}" style="width:60px"></td>
                <td><button class="btn btn-primary btn-sm" onclick="addProductToCart('${product.id}')">Add</button></td>
            `;
            tbody.appendChild(tr);
            });

            document.querySelectorAll('.desc-link').forEach(link => {
                link.addEventListener('click', function() {
                    showFullDesc(this.dataset.title, this.dataset.desc);
                });
            });
        }

        function renderMySQLTable() {
            const mysqlProducts = products.filter(p => p.category === 'mysql');
            const tbody = document.querySelector('#mysql-table tbody');
            tbody.innerHTML = '';

            mysqlProducts.forEach((product) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.specs.edition}</td>
                    <td>${product.specs.vcpus}</td>
                    <td>${product.specs.ram}GB</td>
                    <td>${product.specs.storage}GB SSD</td>
                    <td>RM${product.price.toFixed(2)}/year</td>
                    <td>
                        <div class="quantity-control">
                            <input type="number" min="1" value="1" id="qty-${product.id}">
                        </div>
                    </td>
                    <td>
                        <button class="btn btn-primary btn-sm" 
                            onclick="addProductToCart('${product.id}')">
                            Add to Cart
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        function showFullDesc(title, desc) {
            const modal = document.getElementById('desc-modal');
            document.getElementById('modal-title').textContent = title;
            document.getElementById('modal-desc').textContent = desc;
            modal.style.display = 'block';
    
            modal.querySelector('button').onclick = function() {
                modal.style.display = 'none';
            };
    
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            };
        }

        // ========== TAB NAVIGATION ==========
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabId).classList.add('active');
            document.querySelector(`.tab-btn[onclick="showTab('${tabId}')"]`).classList.add('active');
            
            if (tabId === 'order-tab') {
                loadCart();
                renderPricingTables();
            }
            else if (tabId === 'checkout-tab') loadOrderSummary();
            else if (tabId === 'admin-tab') renderProducts();
        }

        // ========== CART FUNCTIONS ==========
        function addProductToCart(productId) {
            const environment = document.getElementById('server-environment').value;
            const envName = environment === 'az1' ? 'AZ1' : 'AZ2';
    
            const product = products.find(p => p.id === productId);
            if (!product) return;
    
            const quantity = parseInt(document.getElementById(`qty-${productId}`).value) || 1;
            const existingItem = cart.find(item => item.id === `${productId}-${environment}`);
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                cart.push({
                    id: `${productId}-${environment}`,
                    name: `${product.name} (${envName})`,
                    price: product.price,
                    quantity: quantity,
                    environment: environment
                });
            }
            
            saveCart();
            loadCart();
            alert(`${quantity} × ${product.name} (${envName}) added to cart!`);
        }

        function removeFromCart(index) {
            if (confirm('Are you sure you want to remove this item from your cart?')) {
                cart.splice(index, 1);
                saveCart();
                loadCart();
            }
        }

        function clearCart() {
            if (confirm('Are you sure you want to clear your cart?')) {
                cart = [];
                saveCart();
                loadCart();
            }
        }

        function saveCart() {
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        function loadCart() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSummaryContainer = document.getElementById('cart-summary');
            const cartActionsContainer = document.getElementById('cart-actions');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<div class="empty-cart">Your cart is empty</div>';
                cartSummaryContainer.style.display = 'none';
                cartActionsContainer.style.display = 'none';
                return;
            }
            
            cartItemsContainer.innerHTML = '';
            let subtotal = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div class="cart-item-details">
                        <div><strong>${item.name}</strong></div>
                        <div>Quantity: ${item.quantity}</div>
                        <div>Price: RM${item.price.toFixed(2)} each</div>
                        <div><strong>Subtotal: RM${itemTotal.toFixed(2)}</strong></div>
                    </div>
                    <div class="cart-item-actions">
                        <button class="delete-item" onclick="removeFromCart(${index})">×</button>
                    </div>
                `;
                cartItemsContainer.appendChild(cartItem);
            });
            
            const tax = subtotal * TAX_RATE;
            const total = subtotal + tax;
            
            document.getElementById('cart-subtotal').textContent = `RM${subtotal.toFixed(2)}`;
            document.getElementById('cart-tax').textContent = `RM${tax.toFixed(2)}`;
            document.getElementById('cart-total').textContent = `RM${total.toFixed(2)}`;
            
            cartSummaryContainer.style.display = 'block';
            cartActionsContainer.style.display = 'flex';
        }

        // ========== CHECKOUT FUNCTIONS ==========
        function loadOrderSummary() {
            const orderItemsContainer = document.getElementById('order-items');
            
            orderItemsContainer.innerHTML = '';
            
            if (cart.length === 0) {
                orderItemsContainer.innerHTML = '<p>No items in cart</p>';
                document.getElementById('order-subtotal').textContent = 'RM0.00';
                document.getElementById('order-tax').textContent = 'RM0.00';
                document.getElementById('order-total').textContent = 'RM0.00';
                return;
            }
            
            let subtotal = 0;
            
            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                const orderItem = document.createElement('div');
                orderItem.className = 'order-item';
                orderItem.innerHTML = `
                    <div>${item.name} (${item.quantity})</div>
                    <div>RM${itemTotal.toFixed(2)}</div>
                `;
                orderItemsContainer.appendChild(orderItem);
            });
            
            const tax = subtotal * TAX_RATE;
            const total = subtotal + tax;
            
            document.getElementById('order-subtotal').textContent = `RM${subtotal.toFixed(2)}`;
            document.getElementById('order-tax').textContent = `RM${tax.toFixed(2)}`;
            document.getElementById('order-total').textContent = `RM${total.toFixed(2)}`;
        }

        function validateForm() {
            const requiredFields = ['full-name', 'email', 'address', 'city', 'state', 'zip', 'card-name', 'card-number', 'expiry', 'cvv'];
            
            for (const fieldId of requiredFields) {
                const field = document.getElementById(fieldId);
                if (!field.value.trim()) {
                    alert(`Please fill in ${field.labels[0].textContent}`);
                    field.focus();
                    return false;
                }
            }
            
            return true;
        }

        // ========== ADMIN FUNCTIONS ==========
        function updateSpecsForm() {
            const category = document.getElementById('admin-product-category').value;
            const specsSection = document.getElementById('specs-section');
            const ecsSpecs = document.getElementById('ecs-specs');
            const evsSpecs = document.getElementById('evs-specs');
            const storageSpecs = document.getElementById('storage-specs');
            const managedSpecs = document.getElementById('managed-specs');
            const mysqlSpecs = document.getElementById('mysql-specs');
            
            specsSection.style.display = 'none';
            ecsSpecs.style.display = 'none';
            evsSpecs.style.display = 'none';
            storageSpecs.style.display = 'none';
            managedSpecs.style.display = 'none';
            mysqlSpecs.style.display = 'none';
            
            if (category === 'ecs') {
                specsSection.style.display = 'block';
                ecsSpecs.style.display = 'block';
            } else if (category === 'evs') {
                specsSection.style.display = 'block';
                evsSpecs.style.display = 'block';
            } else if (category === 'storage') {
                specsSection.style.display = 'block';
                storageSpecs.style.display = 'block';
            } else if (category === 'managed') {
                specsSection.style.display = 'block';
                managedSpecs.style.display = 'block';
            } else if (category === 'mysql') {
                specsSection.style.display = 'block';
                mysqlSpecs.style.display = 'block';
            }
        }

        function renderProducts() {
            const productsList = document.getElementById('products-list');
            productsList.innerHTML = '';
            
            products.forEach(product => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${product.id}</td>
                    <td>${product.name}</td>
                    <td>${product.category}</td>
                    <td>RM${product.price.toFixed(2)}</td>
                    <td>
                        <button class="action-btn" style="background: #3498db; color: white;" onclick="editProduct('${product.id}')">Edit</button>
                        <button class="action-btn" style="background: #e74c3c; color: white;" onclick="deleteProduct('${product.id}')">Delete</button>
                    </td>
                `;
                productsList.appendChild(tr);
            });
        }

        function showAddForm() {
            document.getElementById('form-title').textContent = 'Add Product';
            document.getElementById('product-form').style.display = 'block';
            document.getElementById('product-id').value = '';
            document.getElementById('admin-product-name').value = '';
            document.getElementById('admin-product-category').value = '';
            document.getElementById('admin-product-price').value = '';
            document.getElementById('admin-product-description').value = '';
            
            document.getElementById('specs-section').style.display = 'none';
        }
        
        function editProduct(id) {
            const product = products.find(p => p.id === id);
            if (!product) return;
            
            document.getElementById('form-title').textContent = 'Edit Product';
            document.getElementById('product-id').value = product.id;
            document.getElementById('admin-product-name').value = product.name;
            document.getElementById('admin-product-category').value = product.category;
            document.getElementById('admin-product-price').value = product.price;
            document.getElementById('admin-product-description').value = product.description || '';
            
            if (product.category === 'ecs') {
                document.getElementById('ecs-vcpus').value = product.specs.vcpus;
                document.getElementById('ecs-memory').value = product.specs.memory;
            } else if (product.category === 'evs') {
                document.getElementById('evs-capacity').value = product.specs.capacity;
            } else if (product.category === 'storage') {
                document.getElementById('storage-type').value = product.specs.type;
                document.getElementById('storage-capacity').value = product.specs.capacity;
            } else if (product.category === 'managed') {
                document.getElementById('managed-level').value = product.specs.level;
            } else if (product.category === 'mysql') {
                document.getElementById('mysql-vcpus').value = product.specs.vcpus;
                document.getElementById('mysql-ram').value = product.specs.ram;
                document.getElementById('mysql-storage').value = product.specs.storage;
                document.getElementById('mysql-edition').value = product.specs.edition;
            }
            
            updateSpecsForm();
            document.getElementById('product-form').style.display = 'block';
        }
        
        function saveProduct() {
            const id = document.getElementById('product-id').value || 
                      `${document.getElementById('admin-product-category').value.toLowerCase()}-${products.length + 1}`;
                
            const name = document.getElementById('admin-product-name').value;
            const category = document.getElementById('admin-product-category').value;
            const price = parseFloat(document.getElementById('admin-product-price').value);
            const description = document.getElementById('admin-product-description').value;
            
            if (!name || !category || isNaN(price)) {
                alert('Please fill in all required fields');
                return;
            }
            
            let specs = {};
            if (category === 'ecs') {
                specs = {
                    vcpus: parseInt(document.getElementById('ecs-vcpus').value),
                    memory: parseFloat(document.getElementById('ecs-memory').value)
                };
            } else if (category === 'evs') {
                specs = {
                    capacity: parseInt(document.getElementById('evs-capacity').value)
                };
            } else if (category === 'storage') {
                specs = {
                    type: document.getElementById('storage-type').value,
                    capacity: parseInt(document.getElementById('storage-capacity').value)
                };
            } else if (category === 'managed') {
                specs = {
                    level: document.getElementById('managed-level').value
                };
            } else if (category === 'mysql') {
                specs = {
                    vcpus: parseInt(document.getElementById('mysql-vcpus').value),
                    ram: parseInt(document.getElementById('mysql-ram').value),
                    storage: parseInt(document.getElementById('mysql-storage').value),
                    edition: document.getElementById('mysql-edition').value
                };
            }
            
            const product = { id, name, category, price, description, specs };
            
            if (document.getElementById('product-id').value) {
                const index = products.findIndex(p => p.id === id);
                if (index !== -1) {
                    products[index] = product;
                }
            } else {
                products.push(product);
            }
            
            localStorage.setItem('products', JSON.stringify(products));
            renderProducts();
            hideForm();
            renderPricingTables();  
        }
        
        function deleteProduct(id) {
            if (confirm('Are you sure you want to delete this product?')) {
                products = products.filter(p => p.id !== id);
                localStorage.setItem('products', JSON.stringify(products));
                renderProducts();
                renderPricingTables(); 
            }
        }
        
        function hideForm() {
            document.getElementById('product-form').style.display = 'none';
        }

        // ========== INITIALIZE ==========
        document.addEventListener('DOMContentLoaded', function() {
            loadProductsFromStorage();
            initializeCart();
            initializeUI();
            setupEventListeners();
            toggleAdminAccess(true);
        });

        function initializeCart() {
            try {
                const storedCart = localStorage.getItem('cart');
                cart = storedCart ? JSON.parse(storedCart) : [];
    
                cart = cart.filter(item => products.some(p => p.id === item.id.split('-')[0]));
                saveCart();
            } catch (e) {
                console.error('Error loading cart:', e);
                cart = [];
            }
        }

        function initializeUI() {
            loadCart();
            renderPricingTables();
            populateStatesDropdown();
            showTab('order-tab'); 
        }

        function setupEventListeners() {
            document.getElementById('clear-cart').addEventListener('click', clearCart);
    
            document.getElementById('place-order').addEventListener('click', function() {
                if (validateForm()) {
                    alert('Thank you for your order!');
                    cart = [];
                    saveCart();
                    showTab('order-tab');
                }
            });
    
            document.getElementById('add-product-btn').addEventListener('click', showAddForm);
            document.getElementById('save-product').addEventListener('click', saveProduct);
            document.getElementById('cancel-edit').addEventListener('click', hideForm);
        }

        function toggleAdminAccess(show) {
            document.getElementById('admin-link').style.display = show ? 'block' : 'none';
            document.getElementById('admin-tab-btn').style.display = show ? 'block' : 'none';
        }
    </script>
</body>
</html>
